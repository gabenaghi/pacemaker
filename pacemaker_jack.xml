<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
clock clk;
int TLRI = 1000; // 10
int TURI = 400; //10;
int TAVI = 150; //4;
int TPVARP = 100; //3;
int TVRP = 150; //4;
int minwait_A = 1;
int minwait_V = 1;

// Heart sensing signals
broadcast chan Asense;
broadcast chan Vsense;

// Heart pacing signals
broadcast chan Apace;
broadcast chan Vpace;
broadcast chan Aget;
broadcast chan Vget;

// Speaker
chan StopHigh;
chan StopLow;
chan PlayHigh;
chan PlayLow;

// LEDs
chan LEDon[4];
chan LEDoff[4];
bool ledOn[4]; // used by LED controller

// Keyboard
chan forceApace;
chan forceVpace;

// Heart rate
int obs_interval = 1000;

const int LED_VPACE = 0;
const int LED_VGET = 1;
const int LED_APACE = 2;
const int LED_AGET = 3;
</declaration><template><name x="5" y="5">LRI</name><declaration>// Place local declarations here.
clock lri_t;</declaration><location id="id0" x="136" y="-224"><committed/></location><location id="id1" x="-96" y="-104"><committed/></location><location id="id2" x="264" y="96"><committed/></location><location id="id3" x="0" y="-104"><name x="-24" y="-136">ASed</name></location><location id="id4" x="120" y="24"><name x="152" y="16">LRI</name><label kind="invariant" x="192" y="16">lri_t &lt;= TLRI - TAVI</label></location><init ref="id4"/><transition><source ref="id0"/><target ref="id4"/><label kind="guard" x="416" y="-160">clk &lt;= TLRI</label><label kind="synchronisation" x="416" y="-144">StopLow!</label><nail x="408" y="-224"/><nail x="408" y="0"/></transition><transition><source ref="id0"/><target ref="id4"/><label kind="guard" x="280" y="-152">clk &gt; TLRI</label><label kind="synchronisation" x="280" y="-136">PlayLow!</label><nail x="272" y="-160"/><nail x="272" y="-8"/></transition><transition><source ref="id3"/><target ref="id0"/><label kind="synchronisation" x="40" y="-216">Vsense?</label><label kind="assignment" x="40" y="-200">lri_t = 0</label></transition><transition><source ref="id4"/><target ref="id0"/><label kind="synchronisation" x="128" y="-184">Vsense?</label><label kind="assignment" x="128" y="-168">lri_t = 0</label></transition><transition><source ref="id2"/><target ref="id4"/><label kind="synchronisation" x="200" y="96">Apace!</label><label kind="assignment" x="200" y="112">lri_t = 0</label><nail x="176" y="96"/></transition><transition><source ref="id4"/><target ref="id2"/><label kind="synchronisation" x="192" y="40">forceApace?</label></transition><transition><source ref="id1"/><target ref="id4"/><label kind="synchronisation" x="-144" y="-64">Apace!</label><label kind="assignment" x="-128" y="-48">lri_t = 0</label><nail x="-96" y="24"/></transition><transition><source ref="id3"/><target ref="id1"/><label kind="synchronisation" x="-112" y="-136">forceApace?</label></transition><transition><source ref="id4"/><target ref="id4"/><label kind="synchronisation" x="176" y="-112">Vpace?</label><label kind="assignment" x="184" y="-96">lri_t = 0</label><nail x="144" y="-72"/><nail x="216" y="-72"/><nail x="216" y="-16"/></transition><transition><source ref="id3"/><target ref="id4"/><label kind="synchronisation" x="40" y="-80">Vpace?</label><label kind="assignment" x="56" y="-64">lri_t = 0</label></transition><transition><source ref="id4"/><target ref="id3"/><label kind="synchronisation" x="48" y="-128">Asense?</label><nail x="120" y="-72"/><nail x="88" y="-104"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="-112" y="64">lri_t &gt;= TLRI - TAVI</label><label kind="synchronisation" x="-56" y="80">Apace!</label><label kind="assignment" x="-48" y="96">lri_t = 0</label><nail x="64" y="72"/><nail x="40" y="96"/><nail x="40" y="96"/><nail x="16" y="96"/><nail x="0" y="96"/><nail x="0" y="56"/></transition></template><template><name>AVI</name><declaration>clock avi_t;
</declaration><location id="id5" x="-472" y="144"></location><location id="id6" x="72" y="168"></location><location id="id7" x="88" y="-232"></location><location id="id8" x="-160" y="144"><name x="-160" y="112">WaitURI</name><label kind="invariant" x="-208" y="160">clk &lt;= TURI</label></location><location id="id9" x="-8" y="64"><name x="-18" y="34">AVI</name><label kind="invariant" x="-24" y="72">avi_t &lt;= TAVI</label></location><location id="id10" x="-8" y="-136"><name x="32" y="-160">Idle</name></location><init ref="id10"/><transition><source ref="id5"/><target ref="id10"/><label kind="synchronisation" x="-528" y="-16">Vpace!</label><nail x="-472" y="-144"/></transition><transition><source ref="id8"/><target ref="id5"/><label kind="synchronisation" x="-408" y="120">forceVpace?</label></transition><transition><source ref="id6"/><target ref="id10"/><label kind="synchronisation" x="208" y="-72">Vpace!</label><nail x="288" y="168"/><nail x="256" y="-136"/></transition><transition><source ref="id9"/><target ref="id6"/><label kind="synchronisation" x="40" y="112">forceVpace?</label></transition><transition><source ref="id7"/><target ref="id10"/><label kind="synchronisation" x="120" y="-192">Vpace!</label><nail x="192" y="-232"/></transition><transition><source ref="id10"/><target ref="id7"/><label kind="synchronisation" x="-16" y="-216">forceVpace?</label></transition><transition><source ref="id8"/><target ref="id10"/><label kind="synchronisation" x="-408" y="8">Vsense?</label><nail x="-240" y="144"/><nail x="-344" y="104"/><nail x="-344" y="-136"/><nail x="-160" y="-232"/><nail x="-40" y="-232"/><nail x="-8" y="-184"/></transition><transition><source ref="id8"/><target ref="id10"/><label kind="guard" x="-296" y="56">clk &gt;= TURI</label><label kind="synchronisation" x="-272" y="72">Vpace!</label><nail x="-216" y="112"/><nail x="-216" y="-104"/><nail x="-112" y="-176"/><nail x="-48" y="-176"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="guard" x="-120" y="136">avi_t &gt;= TAVI &amp;&amp; clk &lt; TURI</label><nail x="-72" y="80"/><nail x="-96" y="136"/></transition><transition><source ref="id9"/><target ref="id10"/><label kind="guard" x="64" y="64">avi_t &gt;= TAVI &amp;&amp; clk &gt;= TURI</label><label kind="synchronisation" x="96" y="48">Vpace!</label><nail x="64" y="64"/><nail x="128" y="8"/><nail x="128" y="-96"/><nail x="80" y="-136"/></transition><transition><source ref="id9"/><target ref="id10"/><label kind="synchronisation" x="-168" y="40">Vsense?</label><nail x="-88" y="64"/><nail x="-144" y="8"/><nail x="-144" y="-80"/><nail x="-80" y="-136"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-16" y="-56">Asense?</label><label kind="assignment" x="-8" y="-40">avi_t = 0</label><nail x="40" y="-96"/><nail x="40" y="24"/></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-112" y="-56">Apace?</label><label kind="assignment" x="-104" y="-40">avi_t = 0</label><nail x="-56" y="-96"/><nail x="-56" y="-96"/><nail x="-56" y="32"/></transition></template><template><name>URI</name><declaration>clock t;
</declaration><location id="id11" x="152" y="0"><committed/></location><location id="id12" x="0" y="0"><name x="-16" y="16">URI</name></location><init ref="id12"/><transition><source ref="id11"/><target ref="id12"/><label kind="guard" x="48" y="-104">clk &lt; TURI</label><label kind="synchronisation" x="48" y="-88">PlayHigh!</label><label kind="assignment" x="48" y="-72">clk = 0</label><nail x="120" y="-48"/><nail x="40" y="-48"/></transition><transition><source ref="id11"/><target ref="id12"/><label kind="guard" x="40" y="48">clk &gt;= TURI</label><label kind="synchronisation" x="40" y="64">StopHigh!</label><label kind="assignment" x="40" y="80">clk = 0</label><nail x="104" y="48"/><nail x="40" y="48"/></transition><transition><source ref="id12"/><target ref="id11"/><label kind="synchronisation" x="56" y="-24">Vsense?</label></transition><transition><source ref="id12"/><target ref="id12"/><label kind="synchronisation" x="-192" y="-8">Vpace?</label><label kind="assignment" x="-192" y="8">clk = 0</label><nail x="-48" y="48"/><nail x="-104" y="48"/><nail x="-136" y="16"/><nail x="-136" y="-24"/><nail x="-104" y="-56"/><nail x="-48" y="-56"/></transition></template><template><name x="5" y="5">PVARP</name><declaration>// Place local declarations here.
clock t;
</declaration><location id="id13" x="112" y="-32"><name x="120" y="-64">PVARP</name><label kind="invariant" x="128" y="-40">t&lt;=TPVARP</label></location><location id="id14" x="-200" y="88"><name x="-248" y="80">inter</name><committed/></location><location id="id15" x="-200" y="-32"><name x="-248" y="-48">Idle</name></location><init ref="id15"/><transition><source ref="id15"/><target ref="id13"/><label kind="synchronisation" x="-72" y="-88">Vpace?</label><label kind="assignment" x="-64" y="-72">t = 0</label><nail x="-96" y="-88"/><nail x="8" y="-88"/></transition><transition><source ref="id15"/><target ref="id13"/><label kind="synchronisation" x="-72" y="16">Vsense?</label><label kind="assignment" x="-64" y="32">t = 0</label><nail x="-104" y="16"/><nail x="8" y="16"/></transition><transition><source ref="id13"/><target ref="id15"/><label kind="guard" x="-88" y="-168">t&gt;=TPVARP</label><nail x="112" y="-144"/><nail x="-200" y="-144"/></transition><transition><source ref="id14"/><target ref="id15"/><label kind="synchronisation" x="-136" y="96">Asense!</label><nail x="-128" y="88"/></transition><transition><source ref="id15"/><target ref="id14"/><label kind="synchronisation" x="-256" y="32">Aget?</label></transition></template><template><name>VRP</name><declaration>clock t;</declaration><location id="id16" x="112" y="-96"><name x="102" y="-126">VRP</name><label kind="invariant" x="128" y="-104">t&lt;=TVRP</label></location><location id="id17" x="-144" y="-96"><name x="-154" y="-126">inter</name><committed/></location><location id="id18" x="-144" y="88"><name x="-192" y="80">Idle</name></location><init ref="id18"/><transition><source ref="id16"/><target ref="id18"/><label kind="guard" x="-24" y="96">t&gt;=TVRP</label><nail x="112" y="88"/></transition><transition><source ref="id18"/><target ref="id16"/><label kind="synchronisation" x="-76" y="-19">Vpace?</label><label kind="assignment" x="-76" y="-4">t=0</label></transition><transition><source ref="id17"/><target ref="id16"/><label kind="synchronisation" x="-76" y="-111">Vsense!</label><label kind="assignment" x="-76" y="-96">t=0</label></transition><transition><source ref="id18"/><target ref="id17"/><label kind="synchronisation" x="-204" y="-19">Vget?</label></transition></template><template><name>LED</name><parameter>const int id</parameter><location id="id19" x="-320" y="0"><name x="-330" y="-30">on</name></location><location id="id20" x="-504" y="88"><name x="-514" y="58">off</name></location><init ref="id20"/><transition><source ref="id19"/><target ref="id19"/><label kind="synchronisation" x="-440" y="-56">LEDon[id]?</label><nail x="-376" y="-72"/><nail x="-264" y="-72"/></transition><transition><source ref="id19"/><target ref="id20"/><label kind="synchronisation" x="-368" y="64">LEDoff[id]?</label><nail x="-400" y="88"/></transition><transition><source ref="id20"/><target ref="id19"/><label kind="synchronisation" x="-544" y="8">LEDon[id]?</label><nail x="-440" y="0"/></transition><transition><source ref="id20"/><target ref="id20"/><label kind="synchronisation" x="-456" y="136">LEDoff[id]?</label><nail x="-552" y="152"/><nail x="-464" y="152"/></transition></template><template><name>Speaker</name><location id="id21" x="8" y="112"><name x="32" y="120">playingLow</name></location><location id="id22" x="16" y="-104"><name x="40" y="-128">playingHigh</name></location><location id="id23" x="-176" y="0"><name x="-216" y="-8">Idle</name></location><init ref="id23"/><transition><source ref="id23"/><target ref="id23"/><label kind="synchronisation" x="-240" y="64">StopLow?</label><nail x="-176" y="40"/><nail x="-176" y="64"/><nail x="-240" y="64"/></transition><transition><source ref="id23"/><target ref="id23"/><label kind="synchronisation" x="-240" y="-88">StopHigh?</label><nail x="-176" y="-64"/><nail x="-248" y="-64"/></transition><transition><source ref="id21"/><target ref="id21"/><label kind="synchronisation" x="80" y="80">StopHigh?</label><nail x="80" y="112"/><nail x="80" y="56"/></transition><transition><source ref="id22"/><target ref="id22"/><label kind="synchronisation" x="88" y="-88">StopLow?</label><nail x="80" y="-104"/><nail x="80" y="-48"/></transition><transition><source ref="id21"/><target ref="id21"/><label kind="synchronisation" x="-16" y="144">PlayLow?</label><nail x="-16" y="144"/><nail x="40" y="144"/></transition><transition><source ref="id22"/><target ref="id22"/><label kind="synchronisation" x="-8" y="-160">PlayHigh?</label><nail x="-16" y="-136"/><nail x="48" y="-136"/></transition><transition><source ref="id22"/><target ref="id23"/><label kind="synchronisation" x="-120" y="-112">StopHigh?</label><nail x="-128" y="-88"/></transition><transition><source ref="id21"/><target ref="id23"/><label kind="synchronisation" x="-104" y="112">StopLow?</label><nail x="-136" y="104"/></transition><transition><source ref="id21"/><target ref="id22"/><label kind="synchronisation" x="80" y="0">PlayHigh?</label><nail x="16" y="104"/><nail x="64" y="0"/></transition><transition><source ref="id22"/><target ref="id21"/><label kind="synchronisation" x="-104" y="-8">PlayLow?</label><nail x="-40" y="0"/></transition><transition><source ref="id23"/><target ref="id21"/><label kind="synchronisation" x="-120" y="64">PlayLow?</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="-136" y="-72">PlayHigh?</label></transition></template><template><name>Heart</name><declaration>clock x;</declaration><location id="id24" x="0" y="0"></location><init ref="id24"/><transition><source ref="id24"/><target ref="id24"/><label kind="synchronisation" x="-24" y="152">Apace?</label><label kind="assignment" x="-16" y="168">x = 0</label><nail x="24" y="80"/><nail x="0" y="152"/><nail x="-32" y="80"/></transition><transition><source ref="id24"/><target ref="id24"/><label kind="synchronisation" x="176" y="-32">Vpace?</label><label kind="assignment" x="184" y="-16">x = 0</label><nail x="80" y="-24"/><nail x="160" y="0"/><nail x="80" y="24"/></transition><transition><source ref="id24"/><target ref="id24"/><label kind="guard" x="-40" y="-224">x &gt;= minwait_V</label><label kind="synchronisation" x="-8" y="-208">Vget!</label><label kind="assignment" x="-8" y="-192">x = 0</label><nail x="-32" y="-80"/><nail x="0" y="-160"/><nail x="40" y="-80"/></transition><transition><source ref="id24"/><target ref="id24"/><label kind="guard" x="-248" y="-32">x &gt;= minwait_A</label><label kind="synchronisation" x="-208" y="-16">Aget!</label><label kind="assignment" x="-208" y="0">x = 0</label><nail x="-72" y="32"/><nail x="-152" y="8"/><nail x="-72" y="-24"/></transition></template><template><name>Keyboard</name><declaration>bool manual;
clock t;</declaration><location id="id25" x="0" y="0"><name x="-56" y="0">Idle</name></location><init ref="id25"/><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="96" y="32">t &gt;= 1000</label><label kind="assignment" x="96" y="48">t = 0,
obs_interval = 1000</label><nail x="88" y="40"/><nail x="80" y="80"/><nail x="24" y="72"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="192" y="-32">t &gt;= 1000</label><label kind="assignment" x="192" y="-16">t = 0,
obs_interval = 100</label><nail x="96" y="-24"/><nail x="184" y="0"/><nail x="88" y="16"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="-240" y="56">t&gt;=1000 &amp;&amp; manual</label><label kind="synchronisation" x="-240" y="72">forceVpace!</label><label kind="assignment" x="-240" y="88">t = 0</label><nail x="-136" y="136"/><nail x="-88" y="56"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="-272" y="-48">t&gt;=1000 &amp;&amp; manual</label><label kind="synchronisation" x="-272" y="-16">forceApace!</label><label kind="assignment" x="-272" y="-32">t = 0</label><nail x="-216" y="0"/><nail x="-104" y="-24"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="-216" y="-200">t&gt;=1000</label><label kind="assignment" x="-216" y="-184">t = 0,
TLRI = 1200,
TURI = 300,
manual = true</label><nail x="-144" y="-144"/><nail x="-48" y="-96"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="16" y="-232">t &gt;= 1000</label><label kind="assignment" x="16" y="-216">t = 0,
TURI = 300,
TLRI = 800,
manual = false</label><label kind="comments">Sports mode</label><nail x="-32" y="-112"/><nail x="-8" y="-200"/><nail x="32" y="-112"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="-8" y="96">t &gt;= 1000</label><label kind="assignment" x="-8" y="112">t = 0,
TURI = 500,
TLRI = 1200,
manual = false</label><label kind="comments">Sleep mode</label><nail x="-16" y="88"/><nail x="-72" y="160"/><nail x="-64" y="80"/></transition><transition><source ref="id25"/><target ref="id25"/><label kind="guard" x="104" y="-136">t &gt;= 1000</label><label kind="assignment" x="104" y="-120">t = 0,
TURI = 400,
TLRI = 1000,
manual = false</label><label kind="comments">Normal mode</label><nail x="40" y="-104"/><nail x="96" y="-120"/><nail x="88" y="-64"/></transition></template><template><name>HeartRateDisplay</name><declaration>clock t;
int A = 0;
int V = 0;
int displayed_rate = 0;</declaration><location id="id26" x="0" y="0"></location><init ref="id26"/><transition><source ref="id26"/><target ref="id26"/><label kind="guard" x="152" y="48">t &gt;= obs_interval</label><label kind="assignment" x="152" y="64">t = 0,
displayed_rate = V / (obs_interval / 60),
V = 0,
A = 0</label><nail x="144" y="64"/><nail x="48" y="56"/></transition><transition><source ref="id26"/><target ref="id26"/><label kind="synchronisation" x="144" y="-72">Apace?</label><label kind="assignment" x="152" y="-56">A++</label><nail x="136" y="-64"/><nail x="80" y="0"/></transition><transition><source ref="id26"/><target ref="id26"/><label kind="synchronisation" x="-72" y="-152">Asense?</label><label kind="assignment" x="-56" y="-136">A++</label><nail x="-80" y="-128"/><nail x="-8" y="-72"/></transition><transition><source ref="id26"/><target ref="id26"/><label kind="synchronisation" x="-216" y="0">Vpace?</label><label kind="assignment" x="-208" y="16">V++</label><nail x="-168" y="24"/><nail x="-88" y="-16"/></transition><transition><source ref="id26"/><target ref="id26"/><label kind="synchronisation" x="-72" y="144">Vsense?</label><label kind="assignment" x="-56" y="160">V++</label><nail x="-48" y="144"/><nail x="-56" y="56"/></transition></template><template><name>LED_Apace_CTRL</name><location id="id27" x="-216" y="-16"><committed/></location><location id="id28" x="-568" y="-16"><name x="-616" y="-48">turnOff</name><committed/></location><location id="id29" x="-400" y="-16"></location><init ref="id29"/><transition><source ref="id27"/><target ref="id29"/><label kind="synchronisation" x="-368" y="48">LEDon[LED_APACE]!</label><label kind="assignment" x="-384" y="64">ledOn[LED_APACE] = true</label><nail x="-272" y="40"/><nail x="-352" y="40"/></transition><transition><source ref="id28"/><target ref="id29"/><label kind="synchronisation" x="-552" y="48">LEDoff[LED_APACE]!</label><label kind="assignment" x="-576" y="64">ledOn[LED_APACE] = false</label><nail x="-520" y="40"/><nail x="-448" y="40"/></transition><transition><source ref="id29"/><target ref="id27"/><label kind="guard" x="-376" y="-47">!ledOn[LED_APACE]</label><label kind="synchronisation" x="-376" y="-32">Apace?</label></transition><transition><source ref="id29"/><target ref="id28"/><label kind="guard" x="-544" y="-48">ledOn[LED_APACE]</label><label kind="synchronisation" x="-544" y="-32">Apace?</label></transition></template><template><name>LED_Vpace_CTRL</name><location id="id30" x="240" y="0"><committed/></location><location id="id31" x="-224" y="0"><committed/></location><location id="id32" x="0" y="0"></location><init ref="id32"/><transition><source ref="id31"/><target ref="id32"/><label kind="synchronisation" x="-176" y="80">LEDoff[LED_VPACE]!</label><label kind="assignment" x="-192" y="96">ledOn[LED_VPACE] = false</label><nail x="-160" y="72"/><nail x="-56" y="72"/></transition><transition><source ref="id30"/><target ref="id32"/><label kind="synchronisation" x="56" y="80">LEDon[LED_VPACE]!</label><label kind="assignment" x="40" y="96">ledOn[LED_VPACE] = true</label><nail x="176" y="72"/><nail x="64" y="72"/></transition><transition><source ref="id32"/><target ref="id30"/><label kind="guard" x="60" y="-30">!ledOn[LED_VPACE]</label><label kind="synchronisation" x="60" y="-15">Vpace?</label></transition><transition><source ref="id32"/><target ref="id31"/><label kind="guard" x="-172" y="-30">ledOn[LED_VPACE]</label><label kind="synchronisation" x="-172" y="-15">Vpace?</label></transition></template><template><name>LED_Aget_CTRL</name><location id="id33" x="248" y="0"><committed/></location><location id="id34" x="-240" y="0"><committed/></location><location id="id35" x="0" y="0"></location><init ref="id35"/><transition><source ref="id33"/><target ref="id35"/><label kind="synchronisation" x="64" y="80">LEDon[LED_AGET]!</label><label kind="assignment" x="40" y="96">ledOn[LED_AGET] = true</label><nail x="192" y="72"/><nail x="48" y="72"/></transition><transition><source ref="id34"/><target ref="id35"/><label kind="synchronisation" x="-184" y="80">LEDoff[LED_AGET]!</label><label kind="assignment" x="-208" y="96">ledOn[LED_AGET] = false</label><nail x="-176" y="72"/><nail x="-56" y="72"/></transition><transition><source ref="id35"/><target ref="id33"/><label kind="guard" x="64" y="-30">!ledOn[LED_AGET]</label><label kind="synchronisation" x="64" y="-15">Aget?</label></transition><transition><source ref="id35"/><target ref="id34"/><label kind="guard" x="-180" y="-30">ledOn[LED_AGET]</label><label kind="synchronisation" x="-180" y="-15">Aget?</label></transition></template><template><name>LED_Vget_CTRL</name><location id="id36" x="256" y="0"><committed/></location><location id="id37" x="-248" y="0"><committed/></location><location id="id38" x="0" y="0"></location><init ref="id38"/><transition><source ref="id38"/><target ref="id36"/><label kind="guard" x="68" y="-30">!ledOn[LED_VGET]</label><label kind="synchronisation" x="68" y="-15">Vget?</label></transition><transition><source ref="id36"/><target ref="id38"/><label kind="synchronisation" x="64" y="72">LEDon[LED_VGET]!</label><label kind="assignment" x="40" y="88">ledOn[LED_VGET] = true</label><nail x="208" y="72"/><nail x="48" y="72"/></transition><transition><source ref="id37"/><target ref="id38"/><label kind="synchronisation" x="-184" y="72">LEDoff[LED_VGET]!</label><label kind="assignment" x="-208" y="88">ledOn[LED_VGET] = false</label><nail x="-192" y="72"/><nail x="-48" y="72"/></transition><transition><source ref="id38"/><target ref="id37"/><label kind="guard" x="-184" y="-30">ledOn[LED_VGET]</label><label kind="synchronisation" x="-184" y="-15">Vget?</label></transition></template><template><name>Signals_Received</name><location id="id39" x="-280" y="8"><name x="-304" y="24">r_Vget</name><committed/></location><location id="id40" x="-16" y="200"><name x="-40" y="208">r_Vpace</name><committed/></location><location id="id41" x="216" y="-8"><name x="206" y="-38">r_Aget</name><committed/></location><location id="id42" x="-32" y="-216"><name x="-64" y="-248">r_Apace</name><committed/></location><location id="id43" x="-24" y="0"></location><init ref="id43"/><transition><source ref="id43"/><target ref="id39"/><label kind="synchronisation" x="-192" y="48">Vget?</label><nail x="-108" y="43"/><nail x="-228" y="43"/></transition><transition><source ref="id39"/><target ref="id43"/><nail x="-216" y="-48"/><nail x="-104" y="-48"/></transition><transition><source ref="id40"/><target ref="id43"/><nail x="-88" y="168"/><nail x="-88" y="40"/></transition><transition><source ref="id43"/><target ref="id40"/><label kind="synchronisation" x="40" y="136">Vpace?</label><nail x="24" y="80"/><nail x="32" y="168"/></transition><transition><source ref="id42"/><target ref="id43"/><nail x="16" y="-168"/><nail x="24" y="-80"/></transition><transition><source ref="id41"/><target ref="id43"/><nail x="160" y="64"/><nail x="32" y="64"/></transition><transition><source ref="id43"/><target ref="id41"/><label kind="synchronisation" x="72" y="-88">Aget?</label><nail x="40" y="-64"/><nail x="144" y="-64"/></transition><transition><source ref="id43"/><target ref="id42"/><label kind="synchronisation" x="-136" y="-120">Apace?</label><nail x="-80" y="-72"/><nail x="-80" y="-152"/></transition></template><system>// Place template instantiations here.
lri = LRI();
avi = AVI();
uri = URI();
pvarp = PVARP();
vrp = VRP();
led_vpace = LED(LED_VPACE);
led_vget = LED(LED_VGET);
led_apace = LED(LED_APACE);
led_aget = LED(LED_AGET);
led_apace_ctrl = LED_Apace_CTRL();
led_vpace_ctrl = LED_Vpace_CTRL();
led_aget_ctrl = LED_Aget_CTRL();
led_vget_ctrl = LED_Vget_CTRL();
heart = Heart();
keyboard = Keyboard();
speaker = Speaker();
signals_received = Signals_Received();

// List one or more processes to be composed into a system.
system
	lri,
	avi,
	uri,
	pvarp,
	vrp,
	led_vpace,
	led_vget,
	led_apace,
	led_aget,
	led_apace_ctrl,
	led_vpace_ctrl,
	led_aget_ctrl,
	led_vget_ctrl,
	heart,
	keyboard,
	speaker,
	signals_received;</system></nta>